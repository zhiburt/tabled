use tabled::{format::Format, group, object::Segment, Alignment, Modify, Padding, Style, Table};

use crate::util::{create_table, test_table};

mod util;

test_table!(
    group_table_pair_test,
        group!(create_table::<3, 3>()
                .with(Modify::new(Segment::all()).with(Alignment::left()))
                .with(Modify::new(Segment::all()).with(Padding::new(3, 1, 0, 0)))
                .with(Modify::new(Segment::all()).with(Format::new(|s| format!("[{}]", s)))),
            create_table::<4, 4>()
                .with(Modify::new(Segment::all()).with(Alignment::right()))
                .with(Modify::new(Segment::all()).with(Padding::new(1, 1, 1, 1)))
                .with(Modify::new(Segment::all()).with(Format::new(|s| format!("({})", s))))),
    "+--------------------------------------------------------+-------------------------------------------------------------+"
    "| +-------+--------------+--------------+--------------+ | +-----+------------+------------+------------+------------+ |"
    "| |   [N] |   [column 0] |   [column 1] |   [column 2] | | |     |            |            |            |            | |"
    "| +-------+--------------+--------------+--------------+ | | (N) | (column 0) | (column 1) | (column 2) | (column 3) | |"
    "| |   [0] |   [0-0]      |   [0-1]      |   [0-2]      | | |     |            |            |            |            | |"
    "| +-------+--------------+--------------+--------------+ | +-----+------------+------------+------------+------------+ |"
    "| |   [1] |   [1-0]      |   [1-1]      |   [1-2]      | | |     |            |            |            |            | |"
    "| +-------+--------------+--------------+--------------+ | | (0) |      (0-0) |      (0-1) |      (0-2) |      (0-3) | |"
    "| |   [2] |   [2-0]      |   [2-1]      |   [2-2]      | | |     |            |            |            |            | |"
    "| +-------+--------------+--------------+--------------+ | +-----+------------+------------+------------+------------+ |"
    "|                                                        | |     |            |            |            |            | |"
    "|                                                        | | (1) |      (1-0) |      (1-1) |      (1-2) |      (1-3) | |"
    "|                                                        | |     |            |            |            |            | |"
    "|                                                        | +-----+------------+------------+------------+------------+ |"
    "|                                                        | |     |            |            |            |            | |"
    "|                                                        | | (2) |      (2-0) |      (2-1) |      (2-2) |      (2-3) | |"
    "|                                                        | |     |            |            |            |            | |"
    "|                                                        | +-----+------------+------------+------------+------------+ |"
    "|                                                        | |     |            |            |            |            | |"
    "|                                                        | | (3) |      (3-0) |      (3-1) |      (3-2) |      (3-3) | |"
    "|                                                        | |     |            |            |            |            | |"
    "|                                                        | +-----+------------+------------+------------+------------+ |"
    "+--------------------------------------------------------+-------------------------------------------------------------+"
);

test_table!(
    group_table_pair_clean_test,
        group!(@ create_table::<3, 3>()
                .with(Modify::new(Segment::all()).with(Alignment::left()))
                .with(Modify::new(Segment::all()).with(Padding::new(3, 1, 0, 0)))
                .with(Modify::new(Segment::all()).with(Format::new(|s| format!("[{}]", s)))),
            create_table::<4, 4>()
                .with(Modify::new(Segment::all()).with(Alignment::right()))
                .with(Modify::new(Segment::all()).with(Padding::new(1, 1, 1, 1)))
                .with(Modify::new(Segment::all()).with(Format::new(|s| format!("({})", s))))),
    " +-------+--------------+--------------+--------------+  +-----+------------+------------+------------+------------+ "
    " |   [N] |   [column 0] |   [column 1] |   [column 2] |  |     |            |            |            |            | "
    " +-------+--------------+--------------+--------------+  | (N) | (column 0) | (column 1) | (column 2) | (column 3) | "
    " |   [0] |   [0-0]      |   [0-1]      |   [0-2]      |  |     |            |            |            |            | "
    " +-------+--------------+--------------+--------------+  +-----+------------+------------+------------+------------+ "
    " |   [1] |   [1-0]      |   [1-1]      |   [1-2]      |  |     |            |            |            |            | "
    " +-------+--------------+--------------+--------------+  | (0) |      (0-0) |      (0-1) |      (0-2) |      (0-3) | "
    " |   [2] |   [2-0]      |   [2-1]      |   [2-2]      |  |     |            |            |            |            | "
    " +-------+--------------+--------------+--------------+  +-----+------------+------------+------------+------------+ "
    "                                                         |     |            |            |            |            | "
    "                                                         | (1) |      (1-0) |      (1-1) |      (1-2) |      (1-3) | "
    "                                                         |     |            |            |            |            | "
    "                                                         +-----+------------+------------+------------+------------+ "
    "                                                         |     |            |            |            |            | "
    "                                                         | (2) |      (2-0) |      (2-1) |      (2-2) |      (2-3) | "
    "                                                         |     |            |            |            |            | "
    "                                                         +-----+------------+------------+------------+------------+ "
    "                                                         |     |            |            |            |            | "
    "                                                         | (3) |      (3-0) |      (3-1) |      (3-2) |      (3-3) | "
    "                                                         |     |            |            |            |            | "
    "                                                         +-----+------------+------------+------------+------------+ "
);

test_table!(
    group_table_duplication_test,
        group!(create_table::<3, 3>()
                .with(Modify::new(Segment::all()).with(Alignment::left()))
                .with(Modify::new(Segment::all()).with(Padding::new(3, 1, 0, 0)))
                .with(Modify::new(Segment::all()).with(Format::new(|s| format!("[{}]", s)))); 3),
    "+--------------------------------------------------------+--------------------------------------------------------+--------------------------------------------------------+"
    "| +-------+--------------+--------------+--------------+ | +-------+--------------+--------------+--------------+ | +-------+--------------+--------------+--------------+ |"
    "| |   [N] |   [column 0] |   [column 1] |   [column 2] | | |   [N] |   [column 0] |   [column 1] |   [column 2] | | |   [N] |   [column 0] |   [column 1] |   [column 2] | |"
    "| +-------+--------------+--------------+--------------+ | +-------+--------------+--------------+--------------+ | +-------+--------------+--------------+--------------+ |"
    "| |   [0] |   [0-0]      |   [0-1]      |   [0-2]      | | |   [0] |   [0-0]      |   [0-1]      |   [0-2]      | | |   [0] |   [0-0]      |   [0-1]      |   [0-2]      | |"
    "| +-------+--------------+--------------+--------------+ | +-------+--------------+--------------+--------------+ | +-------+--------------+--------------+--------------+ |"
    "| |   [1] |   [1-0]      |   [1-1]      |   [1-2]      | | |   [1] |   [1-0]      |   [1-1]      |   [1-2]      | | |   [1] |   [1-0]      |   [1-1]      |   [1-2]      | |"
    "| +-------+--------------+--------------+--------------+ | +-------+--------------+--------------+--------------+ | +-------+--------------+--------------+--------------+ |"
    "| |   [2] |   [2-0]      |   [2-1]      |   [2-2]      | | |   [2] |   [2-0]      |   [2-1]      |   [2-2]      | | |   [2] |   [2-0]      |   [2-1]      |   [2-2]      | |"
    "| +-------+--------------+--------------+--------------+ | +-------+--------------+--------------+--------------+ | +-------+--------------+--------------+--------------+ |"
    "+--------------------------------------------------------+--------------------------------------------------------+--------------------------------------------------------+"
);

test_table!(
    group_table_duplication_clean_test,
        group!(@ create_table::<3, 3>()
                .with(Modify::new(Segment::all()).with(Alignment::left()))
                .with(Modify::new(Segment::all()).with(Padding::new(3, 1, 0, 0)))
                .with(Modify::new(Segment::all()).with(Format::new(|s| format!("[{}]", s)))); 3),
    " +-------+--------------+--------------+--------------+  +-------+--------------+--------------+--------------+  +-------+--------------+--------------+--------------+ "
    " |   [N] |   [column 0] |   [column 1] |   [column 2] |  |   [N] |   [column 0] |   [column 1] |   [column 2] |  |   [N] |   [column 0] |   [column 1] |   [column 2] | "
    " +-------+--------------+--------------+--------------+  +-------+--------------+--------------+--------------+  +-------+--------------+--------------+--------------+ "
    " |   [0] |   [0-0]      |   [0-1]      |   [0-2]      |  |   [0] |   [0-0]      |   [0-1]      |   [0-2]      |  |   [0] |   [0-0]      |   [0-1]      |   [0-2]      | "
    " +-------+--------------+--------------+--------------+  +-------+--------------+--------------+--------------+  +-------+--------------+--------------+--------------+ "
    " |   [1] |   [1-0]      |   [1-1]      |   [1-2]      |  |   [1] |   [1-0]      |   [1-1]      |   [1-2]      |  |   [1] |   [1-0]      |   [1-1]      |   [1-2]      | "
    " +-------+--------------+--------------+--------------+  +-------+--------------+--------------+--------------+  +-------+--------------+--------------+--------------+ "
    " |   [2] |   [2-0]      |   [2-1]      |   [2-2]      |  |   [2] |   [2-0]      |   [2-1]      |   [2-2]      |  |   [2] |   [2-0]      |   [2-1]      |   [2-2]      | "
    " +-------+--------------+--------------+--------------+  +-------+--------------+--------------+--------------+  +-------+--------------+--------------+--------------+ "
);

test_table!(
    group_table_with_rows_test,
        group!(create_table::<3, 3>()
                .with(Modify::new(Segment::all()).with(Alignment::left()))
                .with(Modify::new(Segment::all()).with(Padding::new(3, 1, 0, 0)))
                .with(Modify::new(Segment::all()).with(Format::new(|s| format!("[{}]", s)))),
            create_table::<4, 4>()
                .with(Modify::new(Segment::all()).with(Alignment::right()))
                .with(Modify::new(Segment::all()).with(Padding::new(1, 1, 1, 1)))
                .with(Modify::new(Segment::all()).with(Format::new(|s| format!("({})", s)))),
            create_table::<3, 5>()
                .with(Style::modern())
                .with(Modify::new(Segment::all()).with(Alignment::left()))
                .with(Modify::new(Segment::all()).with(Padding::new(2, 2, 0, 0)))
                .with(Modify::new(Segment::all()).with(Format::new(|s| format!("[{}]", s))));
            2
        ),
    "+--------------------------------------------------------------------------------------+-------------------------------------------------------------+"
    "| +-------+--------------+--------------+--------------+                               | +-----+------------+------------+------------+------------+ |"
    "| |   [N] |   [column 0] |   [column 1] |   [column 2] |                               | |     |            |            |            |            | |"
    "| +-------+--------------+--------------+--------------+                               | | (N) | (column 0) | (column 1) | (column 2) | (column 3) | |"
    "| |   [0] |   [0-0]      |   [0-1]      |   [0-2]      |                               | |     |            |            |            |            | |"
    "| +-------+--------------+--------------+--------------+                               | +-----+------------+------------+------------+------------+ |"
    "| |   [1] |   [1-0]      |   [1-1]      |   [1-2]      |                               | |     |            |            |            |            | |"
    "| +-------+--------------+--------------+--------------+                               | | (0) |      (0-0) |      (0-1) |      (0-2) |      (0-3) | |"
    "| |   [2] |   [2-0]      |   [2-1]      |   [2-2]      |                               | |     |            |            |            |            | |"
    "| +-------+--------------+--------------+--------------+                               | +-----+------------+------------+------------+------------+ |"
    "|                                                                                      | |     |            |            |            |            | |"
    "|                                                                                      | | (1) |      (1-0) |      (1-1) |      (1-2) |      (1-3) | |"
    "|                                                                                      | |     |            |            |            |            | |"
    "|                                                                                      | +-----+------------+------------+------------+------------+ |"
    "|                                                                                      | |     |            |            |            |            | |"
    "|                                                                                      | | (2) |      (2-0) |      (2-1) |      (2-2) |      (2-3) | |"
    "|                                                                                      | |     |            |            |            |            | |"
    "|                                                                                      | +-----+------------+------------+------------+------------+ |"
    "|                                                                                      | |     |            |            |            |            | |"
    "|                                                                                      | | (3) |      (3-0) |      (3-1) |      (3-2) |      (3-3) | |"
    "|                                                                                      | |     |            |            |            |            | |"
    "|                                                                                      | +-----+------------+------------+------------+------------+ |"
    "+--------------------------------------------------------------------------------------+-------------------------------------------------------------+"
    "| ┌───────┬──────────────┬──────────────┬──────────────┬──────────────┬──────────────┐ |                                                             |"
    "| │  [N]  │  [column 0]  │  [column 1]  │  [column 2]  │  [column 3]  │  [column 4]  │ |                                                             |"
    "| ├───────┼──────────────┼──────────────┼──────────────┼──────────────┼──────────────┤ |                                                             |"
    "| │  [0]  │  [0-0]       │  [0-1]       │  [0-2]       │  [0-3]       │  [0-4]       │ |                                                             |"
    "| ├───────┼──────────────┼──────────────┼──────────────┼──────────────┼──────────────┤ |                                                             |"
    "| │  [1]  │  [1-0]       │  [1-1]       │  [1-2]       │  [1-3]       │  [1-4]       │ |                                                             |"
    "| ├───────┼──────────────┼──────────────┼──────────────┼──────────────┼──────────────┤ |                                                             |"
    "| │  [2]  │  [2-0]       │  [2-1]       │  [2-2]       │  [2-3]       │  [2-4]       │ |                                                             |"
    "| └───────┴──────────────┴──────────────┴──────────────┴──────────────┴──────────────┘ |                                                             |"
    "+--------------------------------------------------------------------------------------+-------------------------------------------------------------+"
);

test_table!(
    group_table_with_rows_clean_test,
        group!(@ create_table::<3, 3>()
                .with(Modify::new(Segment::all()).with(Alignment::left()))
                .with(Modify::new(Segment::all()).with(Padding::new(3, 1, 0, 0)))
                .with(Modify::new(Segment::all()).with(Format::new(|s| format!("[{}]", s)))),
            create_table::<4, 4>()
                .with(Modify::new(Segment::all()).with(Alignment::right()))
                .with(Modify::new(Segment::all()).with(Padding::new(1, 1, 1, 1)))
                .with(Modify::new(Segment::all()).with(Format::new(|s| format!("({})", s)))),
            create_table::<3, 5>()
                .with(Style::modern())
                .with(Modify::new(Segment::all()).with(Alignment::left()))
                .with(Modify::new(Segment::all()).with(Padding::new(2, 2, 0, 0)))
                .with(Modify::new(Segment::all()).with(Format::new(|s| format!("[{}]", s))));
            2
        ),
    " +-------+--------------+--------------+--------------+                                +-----+------------+------------+------------+------------+ "
    " |   [N] |   [column 0] |   [column 1] |   [column 2] |                                |     |            |            |            |            | "
    " +-------+--------------+--------------+--------------+                                | (N) | (column 0) | (column 1) | (column 2) | (column 3) | "
    " |   [0] |   [0-0]      |   [0-1]      |   [0-2]      |                                |     |            |            |            |            | "
    " +-------+--------------+--------------+--------------+                                +-----+------------+------------+------------+------------+ "
    " |   [1] |   [1-0]      |   [1-1]      |   [1-2]      |                                |     |            |            |            |            | "
    " +-------+--------------+--------------+--------------+                                | (0) |      (0-0) |      (0-1) |      (0-2) |      (0-3) | "
    " |   [2] |   [2-0]      |   [2-1]      |   [2-2]      |                                |     |            |            |            |            | "
    " +-------+--------------+--------------+--------------+                                +-----+------------+------------+------------+------------+ "
    "                                                                                       |     |            |            |            |            | "
    "                                                                                       | (1) |      (1-0) |      (1-1) |      (1-2) |      (1-3) | "
    "                                                                                       |     |            |            |            |            | "
    "                                                                                       +-----+------------+------------+------------+------------+ "
    "                                                                                       |     |            |            |            |            | "
    "                                                                                       | (2) |      (2-0) |      (2-1) |      (2-2) |      (2-3) | "
    "                                                                                       |     |            |            |            |            | "
    "                                                                                       +-----+------------+------------+------------+------------+ "
    "                                                                                       |     |            |            |            |            | "
    "                                                                                       | (3) |      (3-0) |      (3-1) |      (3-2) |      (3-3) | "
    "                                                                                       |     |            |            |            |            | "
    "                                                                                       +-----+------------+------------+------------+------------+ "
    " ┌───────┬──────────────┬──────────────┬──────────────┬──────────────┬──────────────┐                                                              "
    " │  [N]  │  [column 0]  │  [column 1]  │  [column 2]  │  [column 3]  │  [column 4]  │                                                              "
    " ├───────┼──────────────┼──────────────┼──────────────┼──────────────┼──────────────┤                                                              "
    " │  [0]  │  [0-0]       │  [0-1]       │  [0-2]       │  [0-3]       │  [0-4]       │                                                              "
    " ├───────┼──────────────┼──────────────┼──────────────┼──────────────┼──────────────┤                                                              "
    " │  [1]  │  [1-0]       │  [1-1]       │  [1-2]       │  [1-3]       │  [1-4]       │                                                              "
    " ├───────┼──────────────┼──────────────┼──────────────┼──────────────┼──────────────┤                                                              "
    " │  [2]  │  [2-0]       │  [2-1]       │  [2-2]       │  [2-3]       │  [2-4]       │                                                              "
    " └───────┴──────────────┴──────────────┴──────────────┴──────────────┴──────────────┘                                                              "
);
